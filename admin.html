<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang quản trị - Bán Tranh Nghệ Thuật</title>
    <link rel="stylesheet" href="./assets/css/admin.css">
    <link rel="stylesheet" href="./icon/fonts/themify-icons/themify-icons.css">
    <script src="./assets/js/admin.js"></script>
    <script src="./assets/js/DangNhap.js"></script>
    <script src="./assets/js/chuyenslideadmin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="./assets/js/clientArt.js" defer></script>

</head>
<body>
    <div class="sidebar">
        <h2><i class="ti-palette"></i> Nghệ Thuật</h2>
        <ul>
            <li class="active" onclick="showSection('home')"><i class="ti-home"></i> Trang chủ</li>
            <li onclick="showSection('orders')"><i class="ti-shopping-cart"></i> Đơn hàng</li>
            <li onclick="showSection('art')"><i class="ti-image"></i> Tranh</li>
            <li onclick="showSection('customers')"><i class="ti-user"></i> Khách hàng</li>
            <li onclick="showSection('report')"><i class="ti-bar-chart"></i> Báo cáo</li>
            <li onclick="showSection('settings')"><i class="ti-settings"></i> Thiết lập</li>
            
            <a href="/index.html" target="_blank" style="text-decoration: none; color: inherit;">
                <li class="sidebar-link">
                    <i class="ti-world"></i> Về Trang Chủ
                </li>
            </a>
            <li onclick="logout()"><i class="ti-power-off"></i> Đăng xuất</li>
        </ul>
    </div>

    <div class="content">
        <div class="topbar">
            <div class="left">
                <i class="ti-menu"></i>
                <input type="text" placeholder="Tìm kiếm..." class="search-box">
            </div>
            <div class="right">
                <i class="ti-bell"></i>
                <i class="ti-user"></i> <span>Admin</span>
            </div>
        </div>

        <div id="home">
            <div class="header"><h4><i class="ti-info-alt"></i> Tổng quan hệ thống</h4></div>
            <div class="dashboard">
                <div class="card bg-primary"><i class="ti-package"></i><p>Tranh</p><h3>126</h3></div>
                <div class="card bg-success"><i class="ti-shopping-cart-full"></i><p>Đơn hàng</p><h3>89</h3></div>
                <div class="card bg-warning"><i class="ti-user"></i><p>Khách hàng</p><h3>52</h3></div>
                <div class="card bg-danger"><i class="ti-bar-chart"></i><p>Lợi nhuận</p><h3>24 triệu</h3></div>
            </div>

            <div class="block">
                <h4><i class="ti-time"></i> Hoạt động gần đây</h4>
                <div class="activity">
                    <div><i class="ti-plus"></i> Thêm tranh “Mùa thu vàng” vào hệ thống</div>
                    <div><i class="ti-shopping-cart"></i> Đơn hàng #DH102 vừa được tạo</div>
                    <div><i class="ti-user"></i> Khách hàng “Nguyễn Văn A” vừa đăng ký tài khoản</div>
                    <div><i class="ti-pencil-alt"></i> Cập nhật giá cho tranh “Cánh đồng lúa”</div>
                </div>
            </div>

            <div class="block">
                <h4><i class="ti-bar-chart"></i> Thống kê nhanh</h4>
                <div class="stats">
                    <div class="stat"><p>Doanh thu hôm nay</p><h3>2.4 triệu</h3></div>
                    <div class="stat"><p>Đơn hàng hôm nay</p><h3>12</h3></div>
                    <div class="stat"><p>Khách hàng mới</p><h3>3</h3></div>
                </div>
            </div>

            <div class="block" id="ghichu">
                <h4><i class="ti-notepad"></i> Ghi chú quản trị</h4>
                <textarea placeholder="Nhập ghi chú hoặc công việc cần làm..."></textarea>
            </div>
        </div>



         <!-- QUẢN LÍ TRANH -->
        <div id="art" class="page hidden">
            <div class="art-header">
                <h4><i class="ti-image"></i> Quản lý Tranh</h4>
                <button class="add-btn" onclick="openArtForm()">
                    <i class="ti-plus"></i> Thêm tranh
                </button>
            </div>

            <table class="art-table">
                <thead>
                    <tr>
                        <th>Ảnh</th>
                        <th>Tên tranh</th>
                        <th>Danh mục</th>
                        <th>Giá bán</th>
                        <th>Tác giả</th>
                        <th>Số lượng tồn</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dữ liệu sẽ được load từ localStorage -->
                </tbody>
            </table>
        </div>


        <div id="artModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeArtForm()">&times;</span>
                <h3>Thêm Tranh Mới</h3>
                <form id="artForm">
                    <label>Tên tranh:</label>
                    <input type="text" id="tenTranh" placeholder="Nhập tên tranh" required>

                    <label>Danh mục:</label>
                    <input type="text" id="danhMuc" placeholder="Nhập danh mục" required>

                    <label>Giá bán:</label>
                    <input type="number" id="giaBan" placeholder="Nhập giá bán" required>

                    <label>Tác giả:</label>
                    <input type="text" id="tacGia" placeholder="Nhập tên tác giả" required>

                    <label>Số lượng tồn:</label>
                    <input type="number" id="soLuongTon" placeholder="Nhập số lượng tồn kho" required>

                    <label>Link ảnh:</label>
                    <input type="text" id="anhTranh" placeholder="Dán link ảnh" required>

                    <div class="modal-buttons">
                        <button type="button" onclick="saveArt()">Lưu</button>
                        <button type="button" class="cancel" onclick="closeArtForm()">Hủy</button>
                    </div>
                </form>
            </div>
        </div>
        

        <!-- QUẢN LÍ ĐƠN HÀNG -->
        <div id="orders" class="page hidden">
            <div class="page-header">
                <h4><i class="ti-shopping-cart"></i> Quản lý Đơn hàng</h4>
                <button class="btn-create" onclick="openInvoiceForm()">
                    <i class="ti-plus"></i> Tạo hóa đơn
                </button>
            </div>

            <div class="filter-bar">
                <div class="filter-item">
                    <label>Trạng thái:</label>
                    <select id="statusFilter">
                        <option value="Tất cả">Tất cả</option>
                        <option value="pending">Chờ xử lý</option>
                        <option value="shipped">Đang giao</option>
                        <option value="success">Hoàn tất</option>
                        <option value="canceled">Đã hủy</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>Ngày đặt:</label>
                    <input type="date" id="dateFilter">
                </div>
                <div class="filter-item">
                    <input type="text" id="searchOrder" placeholder="Tìm kiếm đơn hàng...">
                </div>
            </div>

            <div class="table-container">
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>Mã đơn</th>
                            <th>Khách hàng</th>
                            <th>Ngày đặt</th>
                            <th>Trạng thái</th>
                            <th>Tổng tiền</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dữ liệu sẽ được load từ localStorage -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="invoiceModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeInvoiceForm()">&times;</span>
                <h3>Tạo hóa đơn mới</h3>

                <form id="invoiceForm">
                    <label>Mã hóa đơn:</label>
                    <input type="text" id="maHD" placeholder="VD: HD001" required>

                    <label>Tên khách hàng:</label>
                    <input type="text" id="tenKH" placeholder="Nhập tên khách hàng" required>

                    <label>Ngày lập:</label>
                    <input type="date" id="ngayLap" required>

                    <label>Tổng tiền:</label>
                    <input type="number" id="tongTien" placeholder="Nhập tổng tiền" required>

                    <div class="modal-buttons">
                        <button type="button" onclick="saveInvoice()">Lưu</button>
                        <button type="button" class="cancel" onclick="closeInvoiceForm()">Hủy</button>
                    </div>
                </form>
            </div>
        </div>


        <!-- QUẢN LÍ KHÁCH HÀNG -->
        <div id="customers" class="page hidden">
            <div class="customer-header">
                <h4><i class="ti-user"></i> Quản lý Khách hàng</h4>
                <button class="add-btn" onclick="openCustomerForm()"><i class="ti-plus"></i> Thêm khách hàng</button>
            </div>

            <table class="customer-table">
                <thead>
                    <tr>
                        <th>Tên khách hàng</th>
                        <th>Số điện thoại</th>
                        <th>Email</th>
                        <th>Địa chỉ</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dữ liệu sẽ được load từ localStorage -->
                </tbody>
            </table>
        </div>
        
        <div id="customerModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCustomerForm()">&times;</span>
                <h3>Thêm Khách Hàng Mới</h3>
                <form id="customerForm">
                    
                    <label>Tên khách hàng:</label>
                    <input type="text" id="tenKhachHang" placeholder="Nhập tên khách hàng" required>

                    <label>Số điện thoại:</label>
                    <input type="text" id="sdtKhachHang" placeholder="Nhập số điện thoại" required>

                    <label>Email:</label>
                    <input type="email" id="emailKhachHang" placeholder="Nhập địa chỉ email" required>

                    <label>Địa chỉ:</label>
                    <input type="text" id="diaChiKhachHang" placeholder="Nhập địa chỉ" required>

                    <div class="modal-buttons">
                        <button type="button" onclick="saveCustomer()">Lưu</button>
                        <button type="button" class="cancel" onclick="closeCustomerForm()">Hủy</button>
                    </div>
                </form>
            </div>
        </div>




        <!-- BÁO CÁO THỐNG KÊ -->
        <div id="report" class="page hidden">
            <h4><i class="ti-bar-chart"></i> Báo cáo thống kê</h4>

            <div class="filter-bar report-filter">
                <div class="filter-item">
                    <label>Loại báo cáo:</label>
                    <select id="reportType">
                        <option value="sales">Doanh thu & Lợi nhuận</option>
                        <option value="orders">Đơn hàng</option>
                        <option value="inventory">Tồn kho</option> </select>
                </div>
                <div class="filter-item">
                    <label>Từ ngày:</label>
                    <input type="date" id="startDate">
                </div>
                <div class="filter-item">
                    <label>Đến ngày:</label>
                    <input type="date" id="endDate">
                </div>
                <button class="add-btn" onclick="generateReport()">
                    <i class="ti-search"></i> Xem báo cáo
                </button>
                <button class="add-btn" onclick="printReport()" style="background: #17a2b8;">
                    <i class="ti-printer"></i> In báo cáo
                </button>
            </div>

            <div class="dashboard report-summary">
                <div class="card bg-success"><i class="ti-money"></i><p>Tổng Doanh thu</p><h3 id="totalRevenue">0 VNĐ</h3></div>
                <div class="card bg-danger"><i class="ti-stats-up"></i><p>Tổng Lợi nhuận</p><h3 id="totalProfit">0 VNĐ</h3></div>
                <div class="card bg-primary"><i class="ti-shopping-cart-full"></i><p>Tổng Đơn hàng</p><h3 id="totalOrders">0</h3></div>
                <div class="card bg-warning"><i class="ti-layers"></i><p>Tranh bán ra</p><h3 id="totalItemsSold">0</h3></div>
            </div>

            <div class="block report-detail">
                <div class="block report-detail">
                <h4>Chi tiết theo ngày / Biểu đồ</h4>
                <div style="background:#f0f0f0;border-radius:8px;padding:10px;">
                    <canvas id="reportChart" style="max-height:300px;"></canvas>
                </div>

                
                <h4 style="margin-top: 20px;">Bảng dữ liệu chi tiết</h4>
                <div class="table-container">
                    <table class="styled-table" id="reportTable">
                        <thead>
                            <tr>
                                <th>Ngày</th>
                                <th>Doanh thu</th>
                                <th>Lợi nhuận</th>
                                <th>Số đơn</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- CÀI ĐẶT HỆ THỐNG -->
        <div id="settings" class="page hidden">
            <h4><i class="ti-settings"></i> Cài đặt hệ thống</h4>

            <div class="block">
                <h4><i class="ti-info-alt"></i> Cấu hình chung</h4>
                <form id="generalSettingsForm">
                    <div class="form-group-setting">
                        <label for="shopName">Tên cửa hàng:</label>
                        <input type="text" id="shopName" value="Nghệ Thuật">
                        <small>Tên này sẽ hiển thị trên thanh điều hướng và báo cáo.</small>
                    </div>
                    
                    <div class="form-group-setting">
                        <label for="adminEmail">Email quản trị:</label>
                        <input type="email" id="adminEmail" value="admin@nghethuat.vn">
                        <small>Email nhận các thông báo quan trọng của hệ thống.</small>
                    </div>
                    
                    <div class="form-group-setting">
                        <label for="currencyUnit">Đơn vị tiền tệ:</label>
                        <select id="currencyUnit">
                            <option value="VNĐ">VNĐ (Việt Nam Đồng)</option>
                            <option value="USD">USD ($)</option>
                        </select>
                    </div>
                    
                    <button type="button" class="add-btn save-settings-btn" onclick="saveGeneralSettings()">
                        <i class="ti-save"></i> Lưu cài đặt chung
                    </button>
                </form>
            </div>

            <div class="block">
                <h4><i class="ti-palette"></i> Tùy chỉnh giao diện</h4>
                <form id="themeSettingsForm">
                    <div class="form-group-setting">
                        <label>Màu chủ đạo (Sidebar):</label>
                        <input type="color" id="primaryColor" value="#ff7b00">
                        <small>Chọn màu sắc chính cho hệ thống (mặc định là cam).</small>
                    </div>

                    <button type="button" class="add-btn save-settings-btn" onclick="saveThemeSettings()">
                        <i class="ti-paint-bucket"></i> Lưu tùy chỉnh giao diện
                    </button>
                </form>
            </div>
        </div>

    </div> 
</body>
</html>